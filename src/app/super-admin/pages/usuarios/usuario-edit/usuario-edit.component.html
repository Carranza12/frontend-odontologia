<app-sidebar></app-sidebar>
<main class="main_container">
  <app-page-title [title]="'Edicion de usuario'"></app-page-title>
  <div>
    <img class="img_path" [src]="img_path" alt="">
    <form class="login-form" [formGroup]="userForm" (ngSubmit)="onSubmit()">

      <input type="file" (change)="onFileSelected($event)" name="profileImage" class="btn_files">

      <div>
        <p>Nombre del usuario</p>
        <input
        class="form_input"
        type="text"
        placeholder="Nombre"
        formControlName="name"
        name="uniqueFieldName1"

        autocomplete="off"
      />
      
      <div
      
        *ngIf="
          userForm.get('name')?.hasError('required') &&
          userForm.get('name')?.touched
        "
        class="error-message"
      >
        El nombre es requerido.
      </div>
      </div>
      <div>
        <input
        class="form_input"
        type="text"
        placeholder="Apellido"
        formControlName="last_name"
        name="uniqueFieldName2"

        autocomplete="off"
      />
      <div
        *ngIf="
          userForm.get('last_name')?.hasError('required') &&
          userForm.get('last_name')?.touched
        "
        class="error-message"
      >
        El apellido es requerido.
      </div>
      </div>
      <div>
        <p>Correo electronico del usuario</p>
        <input
        class="form_input"
        type="email"
        placeholder="Correo electronico"
        formControlName="email"
        name="uniqueFieldName2"

        autocomplete="off"
      />
      <div
        *ngIf="
          userForm.get('email')?.hasError('required') &&
          userForm.get('email')?.touched
        "
        class="error-message"
      >
        El correo electronico es requerido.
      </div>
      <div
      *ngIf="
        userForm.get('email')?.hasError('email') &&
        userForm.get('email')?.touched
      "
      class="error-message"
    >
      El correo electrónico no es válido.
    </div>
      </div>
      <div>
        <label for="cbxPass">
          Modificar Contraseña
        </label>  
        <input type="checkbox" id="cbxPass" formControlName="changePass">
      </div>
      <div>    
        <input
        class="form_input"
        type="password"
        
        placeholder="Contrasena"
        formControlName="password"
        name="uniqueFieldName4"

        autocomplete="off"
        />
      <div
        *ngIf="
          userForm.get('password')?.hasError('required') &&
          userForm.get('password')?.touched
        "
        class="error-message"
      >
        La contrasena es requerida.
      </div>
     
      </div>

      <p>Selecciona los roles:</p>
      <table class="table_grid">
        <thead>
          <tr>
            <th>Nombre</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let role of rolesAvailableList">
            <td   [ngClass]="{'user_selected': role.selected}" (click)="selectRole(role)">{{ role.text }}</td>
          </tr>
         
        </tbody>
      </table>

      <div>
        <select
          class="form_input"
          formControlName="role_default"
          name="role_default"
        >
        <option value="">Selecciona el rol por defecto</option>
          <option [value]="role.value" *ngFor="let role of rolesSelectedList">{{role.text}}</option>
        </select>
        <div
          *ngIf="
            userForm.get('role_default')?.hasError('required') &&
            userForm.get('role_default')?.touched
          "
          class="error-message"
        >
          El rol es requerido.
        </div>
      </div>
      
      <div class="role_trabajador" *ngIf="showTrabajadorInputs">
        <div>
            <input
            class="form_input"
            type="text"
            placeholder="Departamento"
            [formControl]="departamento"
            name="uniqueFieldName1"
    
            autocomplete="off"
          />
          <div
            *ngIf="
            departamento?.errors?.['required'] && departamento.touched
            "
            class="error-message"
          >
            El Departamento es requerido.
          </div>
        </div>
        <div>
            <input
            class="form_input"
            type="text"
            placeholder="Puesto"
            [formControl]="puesto"
            name="uniqueFieldName1"
    
            autocomplete="off"
          />
          <div
            *ngIf="
            puesto?.errors?.['required'] && puesto.touched
            "
            class="error-message"
          >
            El Puesto es requerido.
          </div>
        </div>
      </div>
      <button type="button" (click)="onSubmit()" class="btn_primary">Actualizar</button>
    </form>
  </div>
</main>
